<!DOCTYPE html>
<html lang="sd">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hala Rikshaw</title>
    <link rel="manifest" href="manifest.json">
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-firestore.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-database.js"></script>
    <script src="https://maps.googleapis.com/maps/api/js?key=YOUR_API_KEY&libraries=places,directions&callback=initMap" async defer></script>
    <style>
        body { font-family: Arial, sans-serif; text-align: center; background-image: url('ajrak-pattern.jpg'); background-size: cover; color: white; }
        .container { max-width: 400px; margin: auto; padding: 20px; border: 1px solid #ddd; border-radius: 10px; background: rgba(0, 0, 0, 0.7); }
        input, button, select { width: 100%; margin: 10px 0; padding: 10px; }
        #map { width: 100%; height: 300px; margin-top: 10px; }
    </style>
</head>
<body>
    <button onclick="toggleDarkMode()">ðŸŒ™ Dark Mode</button>

    <!-- Sign-Up Page -->
    <div class="container" id="signup-container">
        <h2>Ù†Ø¦ÙˆÙ† Ú©Ø§ØªÙˆ ÙºØ§Ù‡ÙŠÙˆ</h2>
        <input type="text" id="signup-name" placeholder="Ù†Ø§Ù„Ùˆ">
        <input type="email" id="signup-email" placeholder="Ø§ÙŠÙ…ÙŠÙ„">
        <input type="password" id="signup-password" placeholder="Ù¾Ø§Ø³ÙˆØ±ÚŠ">
        <button onclick="signUp()">Ø±Ø¬Ø³Ù½Ø± Ù¿ÙŠÙˆ</button>
        <p>Ù¾Ù‡Ø±Ø¦ÙŠÙ† Ø¦ÙŠ Ú©Ø§ØªÙˆ Ø¢Ù‡ÙŠØŸ <a href="#" onclick="showLogin()">Ù„Ø§Ú¯ Ø§Ù† ÚªØ±ÙŠÙˆ</a></p>
        <button onclick="loginWithGoogle()">Google Ø³Ø§Ù† Ù„Ø§Ú¯ Ø§Ù† ÚªØ±ÙŠÙˆ</button>
    </div>

    <!-- Login Page -->
    <div class="container" id="login-container" style="display:none;">
        <h2>Hala Rikshaw - Ù„Ø§Ú¯ Ø§Ù†</h2>
        <input type="email" id="login-email" placeholder="Ø§ÙŠÙ…ÙŠÙ„">
        <input type="password" id="login-password" placeholder="Ù¾Ø§Ø³ÙˆØ±ÚŠ">
        <button onclick="login()">Ù„Ø§Ú¯ Ø§Ù†</button>
        <p><a href="#" onclick="forgotPassword()">Ù¾Ø§Ø³ÙˆØ±ÚŠ ÙˆØ³Ø±ÙŠ ÙˆÙŠÙˆØŸ</a></p>
        <p>Ø§Ú©Ø§Ø¦ÙˆÙ†Ù½ Ù†Ø§Ù‡ÙŠØŸ <a href="#" onclick="showSignUp()">Ø±Ø¬Ø³Ù½Ø± Ù¿ÙŠÙˆ</a></p>
    </div>

    <!-- Main App Page -->
    <div class="container" id="app-container" style="display:none;">
        <h2>Hala Rikshaw</h2>
        <p id="user-name"></p>
        
        <!-- Username Update -->
        <input type="text" id="new-username" placeholder="Ù†Ø¦ÙˆÙ† Ù†Ø§Ù„Ùˆ">
        <button onclick="updateUsername()">Ù†Ø§Ù„Ùˆ Ø§Ù¾ÚŠÙŠÙ½ ÚªØ±ÙŠÙˆ</button>

        <label for="pickup">ÚªÙ¿ÙŠ ÙˆÙºÚ» Ú†Ø§Ù‡ÙŠÙˆ Ù¿Ø§ØŸ</label>
        <input type="text" id="pickup" placeholder="Ù¾Ù†Ù‡Ù†Ø¬ÙŠ Ø¬Ø§Ø¡Ù Ù„Ú©Ùˆ">
        
        <label for="destination">ÚªÙ¿ÙŠ ÙˆÚƒÚ» Ú†Ø§Ù‡ÙŠÙˆ Ù¿Ø§ØŸ</label>
        <input type="text" id="destination" placeholder="Ù…Ø·Ù„ÙˆØ¨Û Ø¬Ø§Ø¡Ù Ù„Ú©Ùˆ">
        
        <div id="map"></div>
        
        <p>Ø§Ù†Ø¯Ø§Ø²ÙŠ ÚªØ±Ø§ÙŠÙˆ: <span id="estimated-fare">0</span> Ø±Ù¾ÙŠØ§</p>
        
        <button onclick="bookRide()">Ø¨ÚªÙ†Ú¯ ÚªØ±ÙŠÙˆ</button>
        <p id="status"></p>
        <button onclick="logout()">Ù„Ø§Ú¯ Ø¢Ø¦ÙˆÙ½</button>
    </div>

    <script>
        // Firebase Config
        const firebaseConfig = {
            apiKey: "YOUR_API_KEY",
            authDomain: "YOUR_PROJECT_ID.firebaseapp.com",
            projectId: "YOUR_PROJECT_ID",
            storageBucket: "YOUR_PROJECT_ID.appspot.com",
            messagingSenderId: "YOUR_SENDER_ID",
            appId: "YOUR_APP_ID"
        };
        firebase.initializeApp(firebaseConfig);

        const auth = firebase.auth();

        function showLogin() {
            document.getElementById('signup-container').style.display = 'none';
            document.getElementById('login-container').style.display = 'block';
        }

        function showSignUp() {
            document.getElementById('login-container').style.display = 'none';
            document.getElementById('signup-container').style.display = 'block';
        }

        function signUp() {
            let name = document.getElementById('signup-name').value;
            let email = document.getElementById('signup-email').value;
            let password = document.getElementById('signup-password').value;

            auth.createUserWithEmailAndPassword(email, password)
                .then(userCredential => {
                    let user = userCredential.user;
                    return user.updateProfile({ displayName: name });
                })
                .then(() => {
                    alert('Ø±Ø¬Ø³Ù½Ø± ÚªØ§Ù…ÙŠØ§Ø¨! Ù„Ø§Ú¯ Ø§Ù† Ù¿ÙŠÙˆ.');
                    showLogin();
                })
                .catch(error => alert(error.message));
        }

        function login() {
            let email = document.getElementById('login-email').value;
            let password = document.getElementById('login-password').value;

            auth.signInWithEmailAndPassword(email, password)
                .then(() => {
                    alert('Ù„Ø§Ú¯ Ø§Ù† ÚªØ§Ù…ÙŠØ§Ø¨!');
                    document.getElementById('login-container').style.display = 'none';
                    document.getElementById('app-container').style.display = 'block';
                    document.getElementById('user-name').innerText = "Welcome, " + auth.currentUser.displayName;
                })
                .catch(error => alert(error.message));
        }

        function loginWithGoogle() {
            let provider = new firebase.auth.GoogleAuthProvider();
            auth.signInWithPopup(provider)
                .then(() => {
                    alert('Google Ø³Ø§Ù† ÚªØ§Ù…ÙŠØ§Ø¨ Ù„Ø§Ú¯ Ø§Ù†!');
                    document.getElementById('login-container').style.display = 'none';
                    document.getElementById('app-container').style.display = 'block';
                })
                .catch(error => alert(error.message));
        }

        function forgotPassword() {
            let email = prompt("Ù¾Ù†Ù‡Ù†Ø¬Ùˆ Ø§ÙŠÙ…ÙŠÙ„ Ø¯Ø§Ø®Ù„ ÚªØ±ÙŠÙˆ:");
            if (email) {
                auth.sendPasswordResetEmail(email)
                    .then(() => alert("Ù¾Ø§Ø³ÙˆØ±ÚŠ Ø±ÙŠ Ø³ÙŠÙ½ Ù„Ù†Úª Ø§ÙŠÙ…ÙŠÙ„ ÚªÙŠÙˆ ÙˆÙŠÙˆ!"))
                    .catch(error => alert(error.message));
            }
        }

        function updateUsername() {
            let newName = document.getElementById('new-username').value;
            if (newName) {
                auth.currentUser.updateProfile({ displayName: newName })
                    .then(() => {
                        alert("Ù†Ø§Ù„Ùˆ ÚªØ§Ù…ÙŠØ§Ø¨ÙŠ Ø³Ø§Ù† Ø§Ù¾ÚŠÙŠÙ½ ÚªÙŠÙˆ ÙˆÙŠÙˆ!");
                        document.getElementById('user-name').innerText = "Welcome, " + newName;
                    })
                    .catch(error => alert(error.message));
            }
        }

        function logout() {
            auth.signOut().then(() => {
                alert('Ù„Ø§Ú¯ Ø¢Ø¦ÙˆÙ½ ÚªØ§Ù…ÙŠØ§Ø¨.');
                document.getElementById('app-container').style.display = 'none';
                document.getElementById('login-container').style.display = 'block';
            });
        }
    </script>
</body>
</html>
